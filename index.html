<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PLFC Super Hub üé£</title>
<style>
  :root{
    --bg: #f5fbff;
    --ink:#0b1520;
    --muted:#5a6b7a;
    --card: rgba(255,255,255,0.85);
    --border: rgba(0,0,0,0.08);
    --ring: #7dd3fc; /* sky-300 */
  }
  html,body{height:100%;}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial, Noto Sans, "Apple Color Emoji","Segoe UI Emoji";color:var(--ink);background:var(--bg);}
  /* Fish cursor */
  body{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Cg fill='none'%3E%3Cpath d='M4 16 L10 10 L18 12 L24 8 L22 16 L24 24 L18 20 L10 22 Z' fill='%2300bcd4' opacity='0.95'/%3E%3Ccircle cx='18' cy='13' r='2' fill='%23fff'/%3E%3Ccircle cx='18.6' cy='13' r='1' fill='%23222'/%3E%3C/g%3E%3C/svg%3E") 8 8, auto}
  .shell{position:relative;min-height:100svh;}
  .wrap{max-width:1120px;margin:0 auto;padding:1rem;}
  header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(1.3) blur(8px);background:rgba(255,255,255,0.6);border-bottom:1px solid var(--border);} 
  .hrow{display:flex;gap:.75rem;align-items:center;padding:.75rem 1rem;}
  .title{font-weight:800;letter-spacing:-.02em;font-size:1.35rem;display:flex;gap:.5rem;align-items:center}
  .spacer{flex:1}
  .search{position:relative;max-width:520px;width:100%}
  .search input{width:100%;padding:.65rem .8rem .65rem 2.2rem;border-radius:14px;border:1px solid var(--border);background:rgba(255,255,255,0.85);outline:none}
  .search input:focus{box-shadow:0 0 0 3px var(--ring)}
  .search svg{position:absolute;left:.6rem;top:50%;transform:translateY(-50%);opacity:.55}

  .hero{display:grid;grid-template-columns:1.4fr .9fr;gap:1rem;align-items:stretch;margin:1rem 0}
  .card{background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:0 6px 20px rgba(2,12,26,.07)}
  .card .pad{padding:1rem}
  .btn{appearance:none;border:1px solid var(--border);background:white;border-radius:12px;padding:.55rem .9rem;cursor:pointer}
  .btn:hover{box-shadow:0 0 0 3px var(--ring)}
  .btn.secondary{background:#f0f9ff}
  .btn.ghost{background:transparent}

  .section{margin:1.25rem 0}
  .grid{display:grid;gap:12px}
  @media(min-width:640px){.grid.cols-2{grid-template-columns:repeat(2,1fr)}}
  @media(min-width:860px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}.grid.cols-4{grid-template-columns:repeat(4,1fr)}.grid.cols-5{grid-template-columns:repeat(5,1fr)}}
  .tile{display:block;text-align:left;padding:14px;border-radius:16px;background:var(--card);border:1px solid var(--border);transition:transform .15s ease, box-shadow .15s ease}
  .tile:hover{transform:translateY(-3px);box-shadow:0 10px 24px rgba(2,12,26,.10)}
  .tile .row{display:flex;gap:10px;align-items:center}
  .bubble{border:1px solid #bae6fd;background:#e0f2fe;color:#075985;padding:8px;border-radius:12px;display:inline-flex}
  .muted{color:var(--muted);font-size:.8rem}

  footer{border-top:1px solid var(--border);background:rgba(255,255,255,0.6)}
  footer .pad{padding:12px;font-size:.8rem;color:var(--muted);display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  footer a{color:inherit}

  /* Modal */
  .modal{position:fixed;inset:0;display:none;z-index:50}
  .modal.open{display:flex;align-items:center;justify-content:center;padding:1rem}
  .modal .back{position:absolute;inset:0;background:rgba(0,0,0,.4)}
  .modal .win{position:relative;background:rgba(255,255,255,.92);backdrop-filter:blur(8px);border:1px solid var(--border);border-radius:18px;max-width:900px;width:100%;max-height:90vh;display:flex;flex-direction:column}
  .modal .head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border)}
  .modal .body{padding:12px 14px;overflow:auto}

  /* Inputs */
  .input, textarea, select{width:100%;padding:.55rem .7rem;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.9);outline:none}
  .input:focus, textarea:focus, select:focus{box-shadow:0 0 0 3px var(--ring)}
  textarea{min-height:160px}
  table{width:100%;border-collapse:collapse;font-size:.95rem}
  th,td{padding:.5rem;border-bottom:1px solid var(--border)}
  tfoot td{font-weight:700}

  /* Canvas sits behind everything */
  #ocean{position:fixed;inset:0;z-index:0;pointer-events:none}
  
  /* Main UI sits above canvas */
  #ui { position: relative; z-index: 10; transition: opacity .2s ease; }
  
  /* Fish toggle button (always on top) */
  #fishToggle {
    position: fixed;
    right: calc(env(safe-area-inset-right, 0px) + 12px);
    bottom: calc(env(safe-area-inset-bottom, 0px) + 12px);
    z-index: 9999;
    padding: 12px 14px;
    border: 0;
    border-radius: 999px;
    font-size: 16px;
    background: rgba(0,0,0,.6);
    color: #fff;
    backdrop-filter: blur(6px);
    cursor: pointer;
    touch-action: manipulation;
  }
  
  /* Fish Mode hides all UI except the toggle */
  .fish-only #ui,
  .fish-only header,
  .fish-only footer {
    pointer-events: none;
    opacity: 0;
    transition: opacity .2s ease;
  }
</style>
</head>
<body>
<canvas id="ocean" aria-hidden="true"></canvas>

<!-- Always-visible fish toggle -->
<button id="fishToggle" aria-pressed="false" aria-label="Toggle Fish Mode">üêü Fish</button>

<!-- Wrap all main UI content -->
<div id="ui">
  <div class="shell">
    <header>
      <div class="wrap hrow">
        <div class="title">üêü <span>PLFC Super Hub</span></div>
        <div class="spacer"></div>
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input id="search" placeholder="Search tiles (e.g. Grants, Knot, Reef)">
        </div>
        <button class="btn ghost" onclick="alert('Settings coming soon')">Settings</button>
      </div>
    </header>

    <main class="wrap">
      <section class="hero">
        <div class="card"><div class="pad">
          <h1 style="margin:.2rem 0 0;line-height:1.2">Welcome to the Point Lookout Fishing Club üé£</h1>
          <p class="muted" style="margin:.4rem 0 1rem;max-width:60ch">A playful, linkable set of micro‚Äëapps for members and committee. Start with the tiles below, and we'll stitch them into the full Straddie Super‚ÄëApp later.</p>
          <div style="display:flex;gap:.5rem;flex-wrap:wrap">
            <button class="btn" onclick="openModal('countdown')">Next Event Countdown</button>
            <button class="btn secondary" onclick="alert('Open docs repo')">Docs</button>
            <button class="btn" onclick="alert('Open GitHub org')">GitHub</button>
          </div>
        </div></div>
        <div class="card"><div class="pad">
          <div class="grid cols-2">
            <div class="card" style="background:#ffffffb3"><div class="pad">
              <div class="muted">Next Comp</div>
              <div id="countdown" style="font-weight:800;font-size:1.8rem"></div>
            </div></div>
            <div class="card" style="background:#ffffffb3"><div class="pad">
              <div class="muted">Balance (demo)</div>
              <div id="balanceDemo" style="font-weight:800;font-size:1.8rem">$ 0.00</div>
            </div></div>
          </div>
        </div></div>
      </section>

      <section class="section">
        <h2 style="font-size:1rem;margin:.2rem 0 .5rem">Member Toys</h2>
        <div id="tiles" class="grid cols-2 cols-3 cols-4"></div>

        <h2 style="font-size:1rem;margin:1rem 0 .5rem">Committee Micro‚ÄëApps</h2>
        <div id="committee" class="grid cols-2 cols-3 cols-5"></div>
      </section>
    </main>

    <footer>
      <div class="wrap"><div class="pad">
        <span>¬© <span id="year"></span> Point Lookout Fishing Club</span>
        <span>‚Ä¢</span>
        <a href="#" onclick="alert('Open Constitution');return false;">Constitution</a>
        <span>‚Ä¢</span>
        <a href="#" onclick="alert('Open Minutes');return false;">Minutes</a>
        <span style="margin-left:auto">Made with üíô on Straddie</span>
      </div></div>
    </footer>
  </div>

  <!-- Modals -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="back" onclick="closeModal()"></div>
    <div class="win">
      <div class="head">
        <div id="modalTitle" style="font-weight:700">Modal</div>
        <button class="btn" onclick="closeModal()">Close</button>
      </div>
      <div class="body" id="modalBody"></div>
    </div>
  </div>
</div>

<script>
  // ------- WHY YOUR PREVIOUS TRY LOOKED LIKE GOBBLEDYGOOK ---------
  // The first version I gave you was a React component (imports, JSX).
  // GitHub Pages can't run JSX or imports by itself. This file is pure
  // HTML + CSS + vanilla JS ‚Äî drop it into a repo and it just works.

  // ---------- UTILITIES ----------
  const $ = s => document.querySelector(s);
  const local = {
    get:(k, d)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):d}catch{return d}},
    set:(k, v)=>{try{localStorage.setItem(k, JSON.stringify(v))}catch{}}
  };

  // ---------- COUNTDOWN ----------
  const nextEvent = new Date(Date.now()+1000*60*60*24*35); // demo +35 days
  function tickCountdown(){
    const delta = Math.max(0, nextEvent.getTime() - Date.now());
    const d = Math.floor(delta/86400000);
    const h = Math.floor(delta/3600000)%24;
    const m = Math.floor(delta/60000)%60;
    const s = Math.floor(delta/1000)%60;
    $('#countdown').textContent = `${d}d ${h}h ${m}m ${s}s`;
  }
  setInterval(tickCountdown, 1000); tickCountdown();
  $('#year').textContent = new Date().getFullYear();

  // ---------- TILES ----------
  const memberTiles = [
    {key:'leaderboard', label:'Leaderboard', tag:'Fun', action:()=>alert('Stub: /leaderboard')},
    {key:'bite', label:'Bite Times', tag:'Fun', action:()=>alert('Stub: /bite-times')},
    {key:'lure', label:'Lure Picker', tag:'Fun', action:()=>alert('Stub: /lure-picker')},
    {key:'reefmap', label:'Reef Map', tag:'Conservation', action:()=>alert('Stub: /reef-map')},
    {key:'knots', label:'Knot Tutor', tag:'Learn', action:()=>alert('Stub: /knots')},
    {key:'eco', label:'Eco Tip', tag:'Conservation', action:()=>alert('Stub: /eco-tip')},
    {key:'memes', label:'Meme Maker', tag:'Fun', action:()=>alert('Stub: /meme')},
    {key:'countdown', label:'Event Countdown', tag:'Events', action:()=>openModal('countdown')},
  ];
  const committeeTiles = [
    {key:'treasury', label:'Treasury', action:()=>openModal('treasury')},
    {key:'minutes', label:'Minutes', action:()=>openModal('minutes')},
    {key:'tasks', label:'Tasks', action:()=>openModal('tasks')},
    {key:'grants', label:'Grants', action:()=>openModal('grants')},
    {key:'comms', label:'Comms', action:()=>openModal('comms')},
  ];

  function renderTiles(list, target){
    const el = $(target);
    el.innerHTML = '';
    list.forEach(t=>{
      const div = document.createElement('button');
      div.className = 'tile';
      div.onclick = t.action;
      div.innerHTML = `<div class="row"><span class="bubble">üêü</span><div><div style="font-weight:700">${t.label}</div><div class="muted">${t.tag||'Admin'}</div></div></div>`;
      el.appendChild(div);
    });
  }
  renderTiles(memberTiles,'#tiles');
  renderTiles(committeeTiles,'#committee');

  // ---------- SEARCH FILTER ----------
  $('#search').addEventListener('input', e=>{
    const q = e.target.value.toLowerCase();
    const filtered = memberTiles.filter(t=>t.label.toLowerCase().includes(q));
    renderTiles(filtered,'#tiles');
  });

  // ---------- MODAL ----------
  function openModal(key){
    const t = {
      treasury: ()=>TreasuryApp(),
      minutes: ()=>MinutesApp(),
      tasks: ()=>TasksApp(),
      grants: ()=>GrantsApp(),
      comms: ()=>CommsApp(),
      countdown: ()=>CountdownView(),
    }[key];
    const {title, body} = t? t(): {title:'Oops', body:document.createTextNode('Unknown view')};
    $('#modalTitle').textContent = title;
    const mb = $('#modalBody'); mb.innerHTML=''; mb.appendChild(body);
    $('#modal').classList.add('open');
    $('#modal').setAttribute('aria-hidden','false');
  }
  function closeModal(){
    $('#modal').classList.remove('open');
    $('#modal').setAttribute('aria-hidden','true');
  }

  // ---------- MICRO‚ÄëAPPS (LocalStorage, no libs) ----------
  function TreasuryApp(){
    const rows = local.get('plfc_treasury_rows', []);
    const wrap = document.createElement('div');
    wrap.innerHTML = `
      <div class="grid cols-2" style="gap:8px;margin-bottom:8px">
        <input id="t_date" class="input" placeholder="Date"/>
        <input id="t_item" class="input" placeholder="Item"/>
        <input id="t_amount" class="input" type="number" step="0.01" placeholder="Amount"/>
        <select id="t_type" class="input"><option value="income">Income</option><option value="expense">Expense</option></select>
        <button class="btn" id="t_add">Add</button>
      </div>
      <div class="card"><div class="pad"><table id="t_tab"><thead><tr><th>Date</th><th>Item</th><th style="text-align:right">Amount</th><th>Type</th><th></th></tr></thead><tbody></tbody><tfoot><tr><td colspan="2">Balance</td><td id="t_total" style="text-align:right"></td><td colspan="2"></td></tr></tfoot></table></div></div>
      <p class="muted">Stored in your browser. CSV export coming soon.</p>`;
    const tbody = wrap.querySelector('tbody');
    function draw(){
      tbody.innerHTML='';
      let total = 0;
      rows.forEach((r,i)=>{
        const tr = document.createElement('tr');
        total += (r.type==='income'?1:-1) * Number(r.amount||0);
        tr.innerHTML = `<td>${r.date||''}</td><td>${r.item||''}</td><td style="text-align:right">${Number(r.amount||0).toFixed(2)}</td><td style="text-align:center">${r.type}</td><td style="text-align:center"><button class="btn" data-i="${i}">Del</button></td>`;
        tbody.appendChild(tr);
      });
      wrap.querySelector('#t_total').textContent = total.toFixed(2);
      tbody.querySelectorAll('button[data-i]').forEach(b=>b.onclick = ()=>{rows.splice(Number(b.dataset.i),1); local.set('plfc_treasury_rows', rows); draw();});
      // Demo: pump the hero balance
      document.getElementById('balanceDemo').textContent = `$ ${Number(total).toFixed(2)}`;
    }
    draw();
    wrap.querySelector('#t_add').onclick = ()=>{
      const r = { date:wrap.querySelector('#t_date').value, item:wrap.querySelector('#t_item').value, amount:wrap.querySelector('#t_amount').value, type:wrap.querySelector('#t_type').value };
      if(!r.item || !r.amount) return;
      rows.push(r); local.set('plfc_treasury_rows', rows); draw();
      wrap.querySelectorAll('#t_date,#t_item,#t_amount').forEach(i=>i.value='');
    };
    return { title:'Treasury ‚Äì Simple Ledger', body:wrap };
  }

  function MinutesApp(){
    const wrap = document.createElement('div');
    const val = local.get('plfc_minutes_text','');
    wrap.innerHTML = `<textarea id="m_area" class="input" placeholder="Type minutes here...">${val.replace(/</g,'&lt;')}</textarea>
    <div style="display:flex;gap:.5rem;margin-top:.5rem"><button class='btn' id='m_copy'>Copy</button><button class='btn' id='m_dl'>Download .txt</button></div>
    <p class="muted">Tip: paste agenda items here before the meeting, then fill decisions and action items live.</p>`;
    const area = wrap.querySelector('#m_area');
    area.addEventListener('input', ()=>local.set('plfc_minutes_text', area.value));
    wrap.querySelector('#m_copy').onclick = ()=>navigator.clipboard.writeText(area.value||'');
    wrap.querySelector('#m_dl').onclick = ()=>{
      const blob = new Blob([area.value||''], {type:'text/plain'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `PLFC-Minutes-${new Date().toISOString().slice(0,10)}.txt`; a.click();
    };
    return { title:'Minutes ‚Äì Quick Capture', body:wrap };
  }

  function TasksApp(){
    const wrap = document.createElement('div');
    const tasks = local.get('plfc_tasks', []);
    wrap.innerHTML = `<div style="display:flex;gap:.5rem"><input id='t_title' class='input' placeholder='Add a task (e.g. Book Bowls Club)'/><button class='btn' id='t_add'>Add</button></div><ul id='t_list' style='list-style:none;padding-left:0;margin:.6rem 0;display:grid;gap:.4rem'></ul>`;
    const list = wrap.querySelector('#t_list');
    function draw(){
      list.innerHTML='';
      tasks.forEach((t,i)=>{
        const li = document.createElement('li');
        li.className='card';
        li.innerHTML = `<div class='pad' style='display:flex;align-items:center;gap:.6rem'><input type='checkbox' ${t.done?'checked':''} data-i='${i}'/><span style='flex:1;${t.done?'text-decoration:line-through;opacity:.6':''}'>${t.title}</span><button class='btn' data-del='${i}'>Del</button></div>`;
        list.appendChild(li);
      });
      list.querySelectorAll('input[type=checkbox]').forEach(c=>c.onchange=()=>{const i=Number(c.dataset.i);tasks[i].done=c.checked;local.set('plfc_tasks',tasks);draw();});
      list.querySelectorAll('button[data-del]').forEach(b=>b.onclick=()=>{const i=Number(b.dataset.del);tasks.splice(i,1);local.set('plfc_tasks',tasks);draw();});
    }
    draw();
    wrap.querySelector('#t_add').onclick = ()=>{const t = wrap.querySelector('#t_title'); if(!t.value.trim()) return; tasks.push({title:t.value,done:false}); local.set('plfc_tasks',tasks); t.value=''; draw();};
    return { title:'Tasks ‚Äì To‚ÄëDo Tracker', body:wrap };
  }

  function GrantsApp(){
    const grants = local.get('plfc_grants', [
      { name:'Qld Community Fishing Grants', status:'Idea', due:'', owner:'' },
      { name:'GCBF (Round 124)', status:'Drafting', due:'2025-07-18', owner:'Richard' },
    ]);
    const wrap = document.createElement('div');
    wrap.innerHTML = `<div class='grid cols-2' style='gap:8px;margin-bottom:8px'>
      <input id='g_name' class='input' placeholder='Grant name'/>
      <select id='g_status' class='input'><option>Idea</option><option>Drafting</option><option>Submitted</option><option>Awarded</option><option>Not Awarded</option></select>
      <input id='g_due' type='date' class='input'/>
      <input id='g_owner' class='input' placeholder='Owner'/>
      <button class='btn' id='g_add'>Add</button>
    </div>
    <div id='g_cards' class='grid cols-2 cols-3' style='gap:10px'></div>`;
    const box = wrap.querySelector('#g_cards');
    function draw(){
      box.innerHTML='';
      grants.forEach((g,i)=>{
        const c = document.createElement('div'); c.className='card';
        c.innerHTML = `<div class='pad'><div style='font-weight:700'>${g.name}</div><div class='muted'>Status: ${g.status}</div><div class='muted'>Due: ${g.due||'‚Äî'}</div><div class='muted'>Owner: ${g.owner||'‚Äî'}</div><div style='margin-top:.5rem'><button class='btn' data-del='${i}'>Remove</button></div></div>`;
        box.appendChild(c);
      });
      box.querySelectorAll('button[data-del]').forEach(b=>b.onclick=()=>{grants.splice(Number(b.dataset.del),1); local.set('plfc_grants',grants); draw();});
    }
    draw();
    wrap.querySelector('#g_add').onclick=()=>{
      const n = wrap.querySelector('#g_name').value.trim(); if(!n) return;
      grants.push({ name:n, status:wrap.querySelector('#g_status').value, due:wrap.querySelector('#g_due').value, owner:wrap.querySelector('#g_owner').value});
      local.set('plfc_grants',grants); draw();
      wrap.querySelectorAll('#g_name,#g_due,#g_owner').forEach(i=>i.value='');
    };
    return { title:'Grants ‚Äì Pipeline Overview', body:wrap };
  }

  function CommsApp(){
    const list = local.get('plfc_comms_list', [ {name:'Andy', email:'andy@example.com'}, {name:'Sami', email:'sami@example.com'} ]);
    const wrap = document.createElement('div');
    wrap.innerHTML = `<textarea id='c_msg' class='input'>Kia ora crew! Next comp on Sat 14 Sep ‚Äì sign-on 6am at Bowls Club. Tight lines! üé£</textarea>
      <div style='display:flex;gap:.5rem;margin:.5rem 0'><button class='btn' id='c_copym'>Copy Message</button><button class='btn' id='c_copye'>Copy All Emails</button><button class='btn' id='c_add'>Add Recipient</button></div>
      <ul id='c_list' style='list-style:none;padding-left:0;margin:0;display:grid;gap:.4rem'></ul>
      <p class='muted'>Pro tip: paste the message into Gmail BCC for a quick bulk send. SMS gateway can be wired later.</p>`;
    const ul = wrap.querySelector('#c_list');
    function draw(){ ul.innerHTML=''; list.forEach((p,i)=>{ const li=document.createElement('li'); li.className='card'; li.innerHTML=`<div class='pad'><div style='font-weight:700'>${p.name||'(no name)'}</div><div class='muted'>${p.email}</div><div style='margin-top:.4rem'><button class='btn' data-del='${i}'>Remove</button></div></div>`; ul.appendChild(li); }); ul.querySelectorAll('button[data-del]').forEach(b=>b.onclick=()=>{list.splice(Number(b.dataset.del),1); local.set('plfc_comms_list',list); draw();}); }
    draw();
    wrap.querySelector('#c_copym').onclick=()=>navigator.clipboard.writeText(wrap.querySelector('#c_msg').value||'');
    wrap.querySelector('#c_copye').onclick=()=>navigator.clipboard.writeText(list.map(x=>x.email).join(', '));
    wrap.querySelector('#c_add').onclick=()=>{const name=prompt('Name?'); const email=prompt('Email?'); if(!email) return; list.push({name:name||'',email}); local.set('plfc_comms_list',list); draw();};
    return { title:'Comms ‚Äì Message Prep & Recipients', body:wrap };
  }

  function CountdownView(){
    const d = document.createElement('div');
    d.innerHTML = `<div style='display:flex;align-items:center;gap:12px'><div id='cd_big' style='font-weight:800;font-size:2rem'></div><div class='muted'>Set your event date directly in code or wire to a config JSON later.</div></div>`;
    const upd = ()=>{const delta = Math.max(0, nextEvent.getTime() - Date.now());
      const D=Math.floor(delta/86400000), H=Math.floor(delta/3600000)%24, M=Math.floor(delta/60000)%60, S=Math.floor(delta/1000)%60; d.querySelector('#cd_big').textContent=`${D}d ${H}h ${M}m ${S}s`;};
    setInterval(upd,1000); upd();
    return { title:'Event Countdown', body:d };
  }

  // ---------- OCEAN CANVAS: fish chase cursor/touch ----------
  const canvas = document.getElementById('ocean');
  const ctx = canvas.getContext('2d');
  const DPR = Math.max(1, Math.min(2, window.devicePixelRatio||1));
  let W = innerWidth, H = innerHeight;
  function size(){ W=innerWidth; H=innerHeight; canvas.width=W*DPR; canvas.height=H*DPR; ctx.setTransform(DPR,0,0,DPR,0,0);}
  size(); addEventListener('resize', size);
  const pointer = { x: W/2, y: H/2 };
  addEventListener('mousemove', e=>{ pointer.x=e.clientX; pointer.y=e.clientY; });
  addEventListener('touchstart', e=>{ if(e.touches&&e.touches[0]){pointer.x=e.touches[0].clientX; pointer.y=e.touches[0].clientY;} }, {passive:true});
  addEventListener('touchmove', e=>{ if(e.touches&&e.touches[0]){pointer.x=e.touches[0].clientX; pointer.y=e.touches[0].clientY;} }, {passive:true});

  const fishies = Array.from({length:16}).map(()=>({
    x: Math.random()*W,
    y: Math.random()*H,
    vx:(Math.random()-0.5)*1.2,
    vy:(Math.random()-0.5)*1.2,
    size: 6+Math.random()*6,
    hue: 180+Math.random()*100,
    turn: 0.05+Math.random()*0.05,
    speed: 0.6+Math.random()*0.8,
  }));
  const big = { x:W*0.8, y:H*0.2, vx:0, vy:0, size:30, hue:15, turn:0.035, speed:1.4 };

  function loop(){
    ctx.clearRect(0,0,W,H);
    const g = ctx.createLinearGradient(0,0,0,H); g.addColorStop(0,'rgba(0,40,80,0.18)'); g.addColorStop(1,'rgba(0,100,120,0.10)'); ctx.fillStyle=g; ctx.fillRect(0,0,W,H);
    fishies.forEach(f=>{
      const dx=pointer.x-f.x, dy=pointer.y-f.y, a=Math.atan2(dy,dx);
      f.vx = f.vx*(1-f.turn) + Math.cos(a)*f.speed*f.turn*10;
      f.vy = f.vy*(1-f.turn) + Math.sin(a)*f.speed*f.turn*10;
      f.x += f.vx; f.y += f.vy;
      if(f.x<-20)f.x=W+20; if(f.x>W+20)f.x=-20; if(f.y<-20)f.y=H+20; if(f.y>H+20)f.y=-20;
      const ang=Math.atan2(f.vy,f.vx);
      ctx.save(); ctx.translate(f.x,f.y); ctx.rotate(ang); ctx.fillStyle=`hsla(${f.hue},70%,60%,0.9)`; ctx.beginPath(); ctx.moveTo(-f.size*.6,-f.size*.5); ctx.lineTo(-f.size*.6,f.size*.5); ctx.lineTo(f.size,0); ctx.closePath(); ctx.fill(); ctx.restore();
    });
    const bdx=pointer.x-big.x, bdy=pointer.y-big.y, ba=Math.atan2(bdy,bdx);
    big.vx = big.vx*(1-big.turn) + Math.cos(ba)*big.speed*1.2;
    big.vy = big.vy*(1-big.turn) + Math.sin(ba)*big.speed*1.2; big.x+=big.vx; big.y+=big.vy;
    ctx.save(); ctx.translate(big.x,big.y); ctx.rotate(ba); ctx.fillStyle=`hsla(${big.hue},80%,55%,0.9)`; ctx.beginPath(); ctx.ellipse(0,0,big.size*1.2,big.size*.7,0,0,Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.moveTo(-big.size*1.2,0); ctx.lineTo(-big.size*1.8,big.size*.5); ctx.lineTo(-big.size*1.8,-big.size*.5); ctx.closePath(); ctx.fill(); ctx.fillStyle='#fff'; ctx.beginPath(); ctx.arc(big.size*.5,-big.size*.15,4,0,Math.PI*2); ctx.fill(); ctx.fillStyle='#222'; ctx.beginPath(); ctx.arc(big.size*.55,-big.size*.15,2,0,Math.PI*2); ctx.fill(); ctx.restore();
    requestAnimationFrame(loop);
  }
  loop();
</script>

<script>
  // Fish Mode Toggle
  (function(){
    const toggle = document.getElementById('fishToggle');
    const enableFishOnly = () => {
      document.body.classList.add('fish-only');
      toggle.setAttribute('aria-pressed', 'true');
      toggle.textContent = 'üêü Show UI';
    };
    const disableFishOnly = () => {
      document.body.classList.remove('fish-only');
      toggle.setAttribute('aria-pressed', 'false');
      toggle.textContent = 'üêü Fish';
    };
    toggle.addEventListener('click', () => {
      document.body.classList.contains('fish-only') ? disableFishOnly() : enableFishOnly();
    });

    // Optional: remember choice
    try {
      const saved = localStorage.getItem('fishOnly');
      if (saved === '1') enableFishOnly();
      const save = () => localStorage.setItem('fishOnly', document.body.classList.contains('fish-only') ? '1' : '0');
      toggle.addEventListener('click', save);
    } catch(e){}
  })();
</script>
</body>
</html>
